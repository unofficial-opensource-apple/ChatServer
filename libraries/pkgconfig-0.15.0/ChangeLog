2003-01-16  Havoc Pennington  <hp@redhat.com>

	* configure.in: 0.15

2003-01-15  Havoc Pennington  <hp@pobox.com>

	* pkg.c (package_init): honor a PKG_CONFIG_LIBDIR to move default 
	search dir, useful in cross-compilation for example, bug 
	#103545 fix from David Schleef
	
2003-01-01  Zack Rusin  <zack@kde.org>

	* main.c (main): added --libs-only-other and --cflags-only-other
	arguments, thanks to which a more obscure dependencies can be
	retrieved, e.g. -pthread

2002-11-19  Havoc Pennington  <hp@redhat.com>

	* pkg-config.1: apply formatting fixes from  Peter Breitenlohner

2002-10-24  Tor Lillqvist  <tml@iki.fi>

	* configure.in: Move the check for Win32 (which tests the $host
	variable) and dependent code later, as it turns out that $host
	isn't normally yet set at that point... (I hadn't noticed as I by
	habit always pass --host=i386-pc-mingw32 to the configure script,
	which sets $host.)

2002-10-11  Havoc Pennington  <hp@redhat.com>

	* pkg.c (verify_package): fix to properly cast iter->data to char*
	before doing pointer arithmetic, from David Robins

2002-10-10  Havoc Pennington  <hp@redhat.com>

	* configure.in: 0.14

2002-10-02  Anders Carlsson  <andersca@gnu.org>

	* pkg.c (add_env_variable_to_list): Don't return NULL, return
	the new list.
	(verify_package): break if we've removed the variable.

2002-09-26  Tor Lillqvist  <tml@iki.fi>

	* parse.c (get_compat_package): Return NULL right away on
	Windows. There has never been any of these legacy *-config scripts
	distributed for Windows as far as I know.

2002-09-26  Anders Carlsson  <andersca@gnu.org>

	* pkg.c (verify_package): Use strncmp when checking for
	the -I prefix.

2002-09-19  Havoc Pennington  <hp@pobox.com>

	* configure.in: 0.13

2002-09-19  Anders Carlsson  <andersca@gnu.org>

	* pkg.c: (verify_package):
	Don't call g_free on strings returned from g_getenv.
	
Tue Sep 17 14:11:51 2002  Jonathan Blandford  <jrb@redhat.com>

	* pkg.c: strip out C_INCLUDE_PATH and CPLUS_INCLUDE_PATH if they
	exist, as this can break -Werror on some newer gcc versions.

2002-09-13  Tor Lillqvist  <tml@iki.fi>

	* Makefile.am (USE_INSTALLED_GLIB): Seems that the automake
	version used by Havoc doesn't recognize pkg_config_CFLAGS and
	pkg_config_LDFLAGS, thus failing builds on Win32 directly from the
	tarball. Set included_glib_includes and pkg_config_LDADD instead,
	then, like in the !USE_INSTALLED_GLIB branch.

	* findme.c (X_OK): If X_OK undefined, define as 1, always, not
	only if G_OS_WIN32, which is never defined here. Fixes a corner
	case on Win32 with MSYS and mingw where configure as included in
	the release tarball for some reason doesn't find unistd.h.

2002-09-09  Havoc Pennington  <hp@pobox.com>

	* pkg.c (fill_list_single_package): fix uninitialized variable,
	patch from Andrea Suatoni

2002-09-06  Havoc Pennington  <hp@redhat.com>

	* parse.c, pkg.c: handle other_libs other_cflags same 
	as -l/-L/-I flags, so we pull in from dependent packages. 
	Closes #85244, #90706, #89851

2002-03-27  Havoc Pennington  <hp@redhat.com>

	* pkg.c (verify_package): fix a typo

2002-03-07  Havoc Pennington  <hp@redhat.com>

	* configure.in: 0.12.0

2002-03-06  Tor Lillqvist  <tml@iki.fi>

	* configure.in: Use GLib 2.x on Win32.

2002-02-28  Havoc Pennington  <hp@redhat.com>

	* pkg-config.1: add a note about the need for AC_SUBST with
	PKG_CHECK_MODULES. Stefan Kost pointed this out.

2002-02-28  Havoc Pennington  <hp@redhat.com>

        Fix for static linking, -l flag order for libs in multiple prefixes
	
	* pkg.c: only sort -L/-I by PKG_CONFIG_PATH order, don't sort 
	-l flags.
	(fill_list_single_package): make whether to path sort
	controlled by a boolean arg
	(fill_list): ditto

2002-02-13  Havoc Pennington  <hp@redhat.com>

	* pkg.c (internal_get_package): look up path position by package
	key, not package name

2002-02-12  Havoc Pennington  <hp@redhat.com>

	* pkg.c (scan_dir): use g_strdup, and fix the location where 
	we assign the nul byte, so we don't mangle things for directories
	that end in '/' - reported by Enrico Scholz

2002-02-07  Havoc Pennington  <hp@redhat.com>

	* configure.in: 0.11.0

2002-02-07  Havoc Pennington  <hp@redhat.com>

	* autogen.sh: patch gslist.c so that it has a stable sort
	function, so we don't utterly mangle the order of the libraries on
	the link line.

2002-02-03  Havoc Pennington  <hp@pobox.com>

	* configure.in: 0.10.0

	Redo distribution with autoconf 2.13
	
2002-02-03  Havoc Pennington  <hp@pobox.com>

	* pkg.m4: require 0.9.0

	* configure.in: increment version to 0.9.0

2002-02-01  Havoc Pennington  <hp@redhat.com>

	* pkg.c (verify_package): don't warn about /usr/include /usr/lib
	in cflags/libs, too annoying to fix

2002-02-01  Havoc Pennington  <hp@redhat.com>

        Throughout: cast chars to guchar before passing to isspace, etc., 
	noted by Morten Welinder
	
	* pkg.c (verify_package): actually strip system -I/-L out of the
	cflags/libs, unless you set an environment variable asking to
	leave them in.

2002-02-01  Havoc Pennington  <hp@redhat.com>

	* pkg.m4: fix shell portability issue, reported by Morten Welinder

2002-01-24  Havoc Pennington  <hp@redhat.com>

	* pkg.c (print_package_list): make the output halfway attractive

	* autogen.sh: use automake-1.4 aclocal-1.4 if found

	* pkg.c (verify_package): add a warning about -I/usr/include in cflags

2001-10-28  Havoc Pennington  <hp@pobox.com>

	* pkg.c: track position of package in the path search order, 
	and sort packages accordingly before assembling flags lists, 
	reported by Jacob Berkman

	* parse.c (get_compat_package): set path position to maxint,
	always at end of path

2001-10-28  Havoc Pennington  <hp@pobox.com>	

	* pkg.c (add_search_dir): put the search path in the right order

2001-10-28  Havoc Pennington  <hp@pobox.com>	

	* configure.in: reorder things so they work on unix

2001-10-27  Tor Lillqvist  <tml@iki.fi>

	New Win32 feature to make pkg-config useful for users of MSVC:
	with the flag --msvc-syntax, munge -L and -l flags appropriately
	for the MSVC command-line compiler. (-I flags are the same.)

	* README.win32: Update.

	* main.c (main): Add --msvc-syntax flag.

	* pkg-config.1: Document it.

	* pkg.h: Declare msvc_syntax.

	* parse.c (parse_libs): Obey msvc_syntax.

2001-10-25  Tor Lillqvist  <tml@iki.fi>

	Improve Windows behaviour: Make it even easier to install
	developer packages in random locations, without having to modify
	the .pc files. Don't set "prefix" globally, instead override it
	for each .pc file parsed, if the path where the .pc file is seems
	to be the standard .../lib/pkgconfig.

	* main.c (main): Add search directories also from two Registry
	keys, in addition to the PKG_CONFIG_PATH environment
	variable. Don't define prefix globally.

	* parse.c (parse_line): Instead, if a .pc file is in
	/foo/bar/lib/pkgconfig, define prefix as /foo/bar for that package
	only.

	* pkg.c: Case-fold file names on Windows, in case they have been
	uppercasified by some tool.

	* pkg-config.1: Document Windows behaviour.

2001-10-21  Tor Lillqvist  <tml@iki.fi>

	* Makefile.am (EXTRA_DIST): Distribute README.win32.

	* main.c (main): (Win32): Add option --prefix-variable in case the
	variable used in a .pc file as "prefix" isn't called
	"prefix".

	* pkg-config.1: Document it.

	* README.win32: Describe the behaviour in more detail.

2001-10-19  Tor Lillqvist  <tml@iki.fi>

	* main.c: (Win32): Add option --dont-define-prefix on Windows. The
	option prevents pkg-config from automatically defining an
	overriding value for the "prefix" variable.

	Unless this option is used, set "prefix" to pkg-config's
	installation directory, i.e. assume that the packages whose
	configuration files are found in the same tree where
	pkg-config.exe itself is, also have been configured to use the
	same prefix. This means that a typical "developer package"
	containg a subtree of headers, libraries, etc, including .pc
	files, can be installed in any random location. As long as
	pkg-config.exe is installed the same tree, things just should
	work.

	* pkg-config.1: Document it.

2001-09-30  Tor Lillqvist  <tml@iki.fi>

	Changes for "pure" Win32 (without Cygwin or similar) support. The
	most important differences compared to pkg-config on Unix are:

	We don't use hardcoded PKGLIBDIR paths but deduce the
	installation prefix at runtime.

	Use the normal GLib DLL, not a private copy. Yes, this does
	introduce a circular dependency, but that can be worked around.
		
	* README.win32: New file.

	* configure.in: Check for Win32. If so, define USE_INSTALLED_GLIB,
	and don't configure in the included glib-1.2.8. Set GLIB_CFLAGS
	and GLIB_LIBS assuming that GLib is installed in the same location
	pkgconfig will be. Check for dirent.h, unistd.h and sys/wait.h
	headers.

	* Makefile.am: If USE_INSTALLED_GLIB, use the GLIB_* values set
	above, and don't make in the glib-1.2.8 subdir.

	* autogen.sh: Use perl -p -i.bak, works better on Win32 (and Cygwin).

	* *.c: Conditionalize inclusions of unistd.h and sys/wait.h. 
	
	* findme.c: Define X_OK on Win32 if necessary.

	* parse.c
	* popthelp.c: Minor Win32 portability ifdefs.

	* parse.c: No need to include <windows.h>. 

	* pkg.c: Don't hardcode PKGLIBDIR, but use
	g_win32_get_package_installation_directory() to deduce it.
	(scan_dir): Make a temp copy of dirname with potential superfluous
	trailing slash removed. The Win32 opendir implementation doesn't
	always like those.

	* pkg.h: If USE_INSTALLED_GLIB, include <glib.h> instead of
	partial-glib.h.

	* popt.c (execCommand): Don't compile on Win32.

	* poptconfig.c (configLine): Don't bother with the "exec" stuff on
	Win32, too complex to port, at least for now.
	(poptReadDefaultConfig) Don't bother compiling on Win32, this
	function isn't even called.
	
2001-07-11  Havoc Pennington  <hp@redhat.com>

	* pkg.c: include sys/types.h to avoid warnings about dirent on
	some systems.

2001-07-11  Havoc Pennington  <hp@pobox.com>

	* parse.c (parse_cflags): fix failure to put space between cflags,
	reported by Chema
	(parse_line): allow spelling Cflags as CFlags, pointed out by Tim
	(get_compat_package): support legacy script gnome-vfs-config for
	package name "libgnomevfs"
	(read_one_line): just blow away all the stupid getc_unlocked crap

2001-06-18  Havoc Pennington  <hp@pobox.com>

	* pkg.m4: print the error, not the name of the variable containing
	it, doh

Sun Jun 17 17:48:45 2001  Tim Janik  <timj@gtk.org>

	* pkg.c (internal_get_package): fix check before parsing a file at
	"location" to read (location==NULL) instead of (pkg==NULL).

2001-06-14  Havoc Pennington  <hp@redhat.com>

	* pkg.c (internal_get_package): don't fall back to legacy -config
	scripts for the -uninstalled case.

2001-06-07  Havoc Pennington  <hp@redhat.com>

	* pkg.m4: add URL to no-pkg-config error message

2001-06-06  Havoc Pennington  <hp@redhat.com>

	* pkg.m4: Fix mismatched backtick

2001-06-05  Havoc Pennington  <hp@redhat.com>

	* main.c: add --errors-to-stdout so you can capture them with backticks

	* pkg.m4: set FOO_PKG_ERRORS after a failed check, so people can
	print the errors. 

2001-06-05  Havoc Pennington  <hp@redhat.com>

	* parse.c: never use flockfile, getc_unlocked

2001-06-05  Havoc Pennington  <hp@redhat.com>

	* pkg.m4: remove unrelated macros

	* README, AUTHORS: updates
	
2001-05-20  Havoc Pennington  <hp@pobox.com>

	* configure.in: revert package name change, just screwing things up.

2001-05-18  Havoc Pennington  <hp@redhat.com>

	* main.c (main): Change default to print errors on --cflags,
	--libs, etc., just not on the predicate-style args

2001-05-18  Havoc Pennington  <hp@pobox.com>

	* pkg.m4: always AC_SUBST the cflags/libs

	* pkg-config.1: updates

	* configure.in: call the package 'pkg-config' instead of
	pkgconfig, for consistency	

	* popt.c: conditionalize on HAVE_SETRESUID, HAVE_SETREUID 
	maybe this will help with windows, and improves the #ifdef __hpux
	test in any case.

	* parse.c: use HAVE_FLOCKFILE to try for windows portability

	* configure.in: check for flockfile

2001-05-17  Havoc Pennington  <hp@pobox.com>

	* pkg.m4: change to print errors only if no custom not-found
	action is specified

	* main.c (main): add PKG_CONFIG_DEBUG_SPEW environment variable
	(main): implement --print-errors where errors are printed, and
	otherwise don't print errors related to packages, just usage
	errors; pointed out by Raja
	(main): rename pcbuilddir to pc_top_builddir

2001-05-17  Havoc Pennington  <hp@redhat.com>

	Changes to support building against uninstalled packages.

        * ${pcfiledir} variable used to locate builddir by locating
	the .pc file

	* ${pcbuilddir} variable set by the PKG_CONFIG_BUILD_DIR variable,
	used for the name of the build directory where the cflags/libs
	will be used, defaults to '$(top_builddir)'

	* "uninstalled" feature looks for foo-uninstalled.pc before
	foo.pc, unless PKG_CONFIG_DISABLE_UNINSTALLED is set

	* --uninstalled option used to see if foo-uninstalled.pc is in use

	* --define-variable option added, but turned out to be unused for
	this
	
2001-05-09  Havoc Pennington  <hp@redhat.com>

	* main.c, findme.c, parse.c, pkg.c, poptconfig.c, popthelp.c,
	poptparse.c: portability fixes from Tomas Ogren

2001-05-09  Havoc Pennington  <hp@redhat.com>

	* Makefile.am (EXTRA_DIST): put the m4 files in the distribution

2001-05-09  Havoc Pennington  <hp@redhat.com>

	* pkg.m4: switch to double quotes for module list, so you can use 
	a variable there.

2001-05-09  Havoc Pennington  <hp@redhat.com>

	* pkg.c (verify_package): fix error message on missing Name field, 
	so that it doesn't try to use the name field to report which
	package was broken

	* parse.c (parse_package_file): change a debug spew to an actual
	error message

2001-04-13  Havoc Pennington  <hp@redhat.com>

	* pkg.m4: fixed this up

	* main.c (main): remove --check-requires, instead allow version
	predicates in the module list.

2001-04-12  Havoc Pennington  <hp@pobox.com>

	* main.c (main): Implement --check-requires='gtk+-2.0 = 1.3.4' 
	option

2001-01-24  Havoc Pennington  <hp@redhat.com>

        Implement --debug spew option.
	
	* main.c: add debug_spew function and an option --debug	

2001-01-06  Havoc Pennington  <hp@pobox.com>

	* pkg.c (scan_dir): fail silently if we can't open a directory in
	the PKG_CONFIG_PATH

2001-01-02  Havoc Pennington  <hp@redhat.com>

	* configure.in: bump version

2001-01-02  Havoc Pennington  <hp@redhat.com>

	* parse.c (parse_package_file): return NULL instead of exiting
	if we can't open the file.

	* main.c (main): Add options to check the version of pkg-config
	itself, and to list all known packages

	* parse.c (split_module_list): fix to work properly
	(parse_module_list): pass variable-substituted string to
	split_module_list(), silly typo

	* pkg.c (get_package): Add ability to pass a filename instead of a
	package name, if you want to use a specific pkg-config file (used
	for configure.in in GTK+ for example, where you can build against
	an uninstalled copy of GLib).

2000-11-29  Havoc Pennington  <hp@redhat.com>

	* parse.c (parse_module_list): Allow commas before/after the
	module list, and allow spaces instead of commas to be used as
	separators. This leniency makes it a lot easier to conditionally
	build the module list according to configure.in checks.

2000-11-29  Havoc Pennington  <hp@pobox.com>

	* pkg.c (packages_get_other_libs): put a space after the
	other_libs
	(packages_get_other_cflags): put a space after the other_cflags

2000-11-27  Havoc Pennington  <hp@redhat.com>

	* main.c (main): don't print space after variable values

	* pkg.c (packages_get_var): don't add space after last variable

2000-11-22  Martijn van Beers  <martijn@earthling.net>

	* main.c: added a --version option for martin
	* parse.c: added jamesh's patch

	release 0.4.1

2000-10-17  Martijn van Beers  <martijn@earthling.net>

	* configure.in:
	* Makefile.am: Change to use C version only.

	release 0.4.0

2000-09-15  Havoc Pennington  <hp@redhat.com>

	* configure.in: AM_PROG_LIBTOOL

	* Makefile.am (experimental_pkg_config_LDADD): Link with .la, not
	.a

2000-08-10  Havoc Pennington  <hp@redhat.com>

	* pkg.c (verify_package): Bugfix from Anders

2000-07-24  Havoc Pennington  <hp@redhat.com>

	* parse.c (get_compat_package): Add support 
	for imlib-config and orbit-config

2000-07-22  Havoc Pennington  <hp@pobox.com>

	* parse.c (get_compat_package): Make it work with any 
	gnome-config package name.

2000-07-22  Havoc Pennington  <hp@pobox.com>

	* parse.c, pkg.c, pkg.h: Add Conflicts: keyword, and do 
	version-checking for Requires: line. Untested.

2000-07-21  Havoc Pennington  <hp@redhat.com>

	* parse.c (get_compat_package): Add some compat stuff (execs
	gnome-config, gtk-config, etc.). We don't yet support all 
	the modules we might want to support.

2000-07-20  Havoc Pennington  <hp@redhat.com>

	* pkg.c (get_package): fix error message formatting

2000-07-20  Havoc Pennington  <hp@redhat.com>

	* pkg.c (recursive_fill_list): append rather than prepend the 
	current libs to the required libs.

	* parse.c (trim_and_sub): Make variables use ${} instead of %{} so
	we can accept "shell variables" subbed by configure

2000-07-20  Havoc Pennington  <hp@redhat.com>

	* autogen.sh: Run perl on the Makefile.am in the glib tarball to
	keep it from doing anything in 'make install'

	* pkg.c (scan_dir): Revert to .pc extension

2000-07-20  Havoc Pennington  <hp@redhat.com>

	* glib-1.2.8.tar.gz: Decided it was easier to just stick 
	in a copy of the tarball instead of hacking up glib;
	this way we get bugfixes. If distribution size is a problem, 
	we can hack on it later. Rerun autogen.sh to get the 
	tarball unpacked and configured.
	
	* configure.in: AC_CONFIG_SUBDIRS(glib-1.2.8)

	* main.c: Add version-comparison 

	* Makefile.am: use new glib tarball
	
2000-07-18  Havoc Pennington  <hp@redhat.com>

	* pkg.c: When removing -l duplicates, keep the last not the first
	-l

	* main.c (main): Added --variable and --module-exists options.

	* Wrote an experimental version of pkg-config in C. For 
	now, glib is required, until I get a cut-and-pasted subset
	of glib up and running.

	C version is not finished, don't release a tarball yet. ;-)
	
	* configure.in, Makefile.am: stuff to build the C version 
	of pkg-config

2000-07-10  Martijn van Beers  <martijn@earthling.net>

	* pkg-config.in: remove -I/usr/include and -L/usr/lib from
	  the flags we output
	* pkg.m4: add a PKG_ACLOCALFLAGS macro
	          add a _DEPENDS output variable

2000-07-01  Martijn van Beers  <martijn@earthling.net>

	* data/gnomeconfig.pce: make output of --modversion be like
	  the output of .pc files

2000-07-01  Martijn van Beers  <martijn@earthling.net>

	* pkg.m4: clean up PKG_CHECK_CFLAG
   
2000-06-27  Martijn van Beers  <martijn@earthling.net>

	* data/gnomeconfig.pce: check for existance with --cflags
				instead of --libs
	* pkg.m4: remove stray debug echo command
		  add PKG_CHECK_CFLAGS macro

2000-06-23  Martijn van Beers  <martijn@earthling.net>

	* data/gnomeconfig.pce,
	* pkg-config.in:
	  - add checks to see if we're properly installed
	  - bug fixes for sh on Tru64

Wed Jun 21 2000  Martijn van Beers  <martijn@earthling.net>

	* added support for extension modules that will be called
	  if a module doesn't have a .pc file
	* added a gnomeconfig.pce extension module to allow for
	  old gnome-libs stuff to be used (at the request of hp)
	* made CFLAGS be like the LIBS_* variables in that you
	  need to do the adding in the .pc file

Thu Jun 15 2000  Martijn van Beers  <martijn@earthling.net>

	* add a --print-pc-dir that prints the default search dir
	* only use the default search dir when nothing else is
	  specified

Sat Jun 10 2000  Martijn van Beers  <martijn@earthling.net>

	* made the duplication removing code in a function
	* fix the duplication code so that it checks $* correctly
	  while we have IFS=":$IFS"
	* splitted up --libs into --libs-only-L, --libs-only-l-self
	  and --libs-only-l-system, as suggested by Tim Janik

Thu Jun  8 2000  Martijn van Beers  <martijn@earthling.net>

	* made it use autoconf/automake
	* pkg-config: removed in favour of a .in equivalent which generates
	              pkg-config from configure
	* pkg-config.in: new file, mostly a copy from pkg-config
	* pkg-config.in: get the prefix for the default pc_path from configure

Wed Jun  7 2000  Martijn van Beers  <martijn@earthling.net>

	* pkg.m4: new file, contains a macro that checks for packages and
	          whether they're the right version
	* pkg-config: added a --modversion flag to get the version of the
	              module (needs a VERSION var in the .pc files)

Tue Jun  6 2000  Martijn van Beers  <martijn@earthling.net>

	* pkg-config: removed the pc_name_pkg functionality
	* pkg-config: show help and error out when there are no arguments
	* pkg-config: get the version from configure
