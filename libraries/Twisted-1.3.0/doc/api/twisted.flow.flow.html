<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>twisted.flow.flow</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css"></link>
</head>
<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">

<!-- =========== START OF NAVBAR =========== -->
<table class="navbar" border="0" width="100%" cellpadding="0" bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="center">
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="twisted.html">Home</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="trees.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="indices.html">Index</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar" align="right" width="100%">
      <table border="0" cellpadding="0" cellspacing="0">
      <tr><th class="navbar" align="center">
        <p class="nomargin">
          <a class="navbar" target="_top" href="http://twistedmatrix.com/">Twisted&nbsp;1.3.0rc1</a>
      </p></th></tr></table>
    </th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <font size="-1"><b class="breadcrumbs">
        <a href="twisted.html">Package&nbsp;twisted</a> ::
        <a href="twisted.flow.html">Package&nbsp;flow</a> ::
        Module&nbsp;flow
      </b></font></br>
    </td>
    <td><table cellpadding="0" cellspacing="0">
      <tr><td align="right"><font size="-2">[<a href="frames.html"target="_top">frames</a>&nbsp;|&nbsp;<a href="twisted.flow.flow.html" target="_top">no&nbsp;frames</a>]</font></td></tr>
    </table></td>
</tr></table>

<!-- =========== START OF MODULE DESCRIPTION =========== -->
<h2 class="module">Module twisted.flow.flow</h2>

<pre class="literalblock">
flow -- asynchronous data flows using generators

This module provides a mechanism for using async data flows through
the use of generators.  The basic idea of flow is that when ever
you require data from a producer, you yield the producer.  If the
producer is ready, then you can call producer.next() to fetch the
incoming data.  Otherwise, the underlying controller will suspend
the operation to try again later.

For example, here is a simple 'printer' which consumes items
from its source by printing them.   Note that to get a new item,
it first yields the data source and then calls source.next()

    from __future__ import generators
    from twisted.flow import flow
    from twisted.internet import reactor, defer
    
    def printer(source):
        source = flow.wrap(source)
        while True:
            yield source
            print source.next()
    
    someFlowSource =  [&quot;one&quot;, flow.Cooperate(1), &quot;two&quot;]

    d = flow.Deferred(printer(someFlowSource))
    d.addCallback(lambda _: reactor.stop())
    reactor.run()

In the example above, there are three objects imported from
the flow module:

   flow.wrap        This converts many data sources such as lists,
                    generators, and deferreds, into a special 
                    instruction object, a Stage.   In this case,  
                    a simple list is wrapped.
 
   flow.Deferred    This is a flow Controller, which executes the
                    stage passed to it, aggregating all results into
                    a list which is passed to the deferred's callback.
                    In this case, the result list is empty, but the
                    callback is used to stop the reactor after the
                    printing has finished.

   flow.Cooperate   This is a special instruction object, which is
                    used by the flow Controller.  In this case, the
                    the flow pauses for one second between 'one'
                    and 'two'.

Most classes in the flow module an Instruction, either a CallLater
or a Stage.   A Stage instruction is used to wrap various sorts of
producers, anything from a simple string to Callback functions.  
Some stages can be constructed directly, such as Zip, Concurrent,
Merge, Callback, or Threaded.  But in most cases, in particular
_String, _List, _Iterable, and _Deferred, state construction is
handled through the wrap function.  Stages can yield other stages 
to build a processing chain, results which are returned to the 
previous stage, or a CallLater instruction which causes the whole 
operation to be suspended.   

Typically, the CallLater instructions as passed up the call stack
till the top level, or Controller.  The controller then typically
returns control, but registers itself to be called later.  Once
called again, the controller sets up the call stack and resumes
the top level generator.  There is a special CallLater, Cooperate,
which simply resumes the chain of stages at a later time.   Some 
stages, Callback, _Deferred, and Threaded have their own special 
CallLater which handles the process of resuming flow for their 
specific case.

    Instruction
       CallLater
          Cooperate
       Stage
              # private stages (use flow.wrap)
          _String
          _List
          _Iterable
          _Deferred
              # public stages
          Map
             Zip
          Concurrent
             Merge
          Block
          Callback*
          Threaded*
    Controller
        Deferred 
        Block
        Protocol
</pre>
<hr/>

<!-- =========== START OF NAVBAR =========== -->
<table class="navbar" border="0" width="100%" cellpadding="0" bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="center">
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="twisted.html">Home</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="trees.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="indices.html">Index</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar" href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>
    <th class="navbar" align="right" width="100%">
      <table border="0" cellpadding="0" cellspacing="0">
      <tr><th class="navbar" align="center">
        <p class="nomargin">
          <a class="navbar" target="_top" href="http://twistedmatrix.com/">Twisted&nbsp;1.3.0rc1</a>
      </p></th></tr></table>
    </th>
  </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td align="left"><font size="-2">Generated by Epydoc 2.0 on Sat May 15 20:07:40 2004</font></td>
    <td align="right"><a href="http://epydoc.sourceforge.net"
                      ><font size="-2">http://epydoc.sf.net</font></a></td>
  </tr>
</table>
</body>
</html>
